# ğŸŒ¸ ë””ì§€í„¸í™”í™˜ í”„ë¡œì íŠ¸ - ì¢…í•© êµ¬í˜„ ê¸°íšì„œ

## ğŸ“‹ í”„ë¡œì íŠ¸ í˜„í™© ë¶„ì„

### âœ… í˜„ì¬ êµ¬í˜„ ì™„ë£Œ
| ê¸°ëŠ¥ | ìƒíƒœ | íŒŒì¼ ìœ„ì¹˜ |
|------|------|----------|
| 6ë‹¨ê³„ ì£¼ë¬¸ ìœ„ìë“œ | âœ… ì™„ë£Œ | `src/components/product/` |
| Firebase ì¸ì¦ (Google OAuth) | âœ… ì™„ë£Œ | `src/contexts/AuthContext.tsx` |
| PortOne ê²°ì œ ì—°ë™ | âœ… ì™„ë£Œ | `src/lib/portOnePayments.ts` |
| AI ì´ë¯¸ì§€ ìƒì„± (Gemini) | âœ… ì™„ë£Œ | `src/app/api/ai/generate-image/` |
| AI ë¹„ë””ì˜¤ ìƒì„± (Veo 3.1) | âœ… ì™„ë£Œ | `src/app/api/ai/generate-video/` |
| ê²°ì œ ê²€ì¦ API | âœ… ì™„ë£Œ | `src/app/api/confirm-payment/` |
| ì •ì  í™˜ë¶ˆ ê·œì • í˜ì´ì§€ | âœ… ì™„ë£Œ | `src/app/returns/page.tsx` |

### âŒ êµ¬í˜„ í•„ìš” í•­ëª©
| ê¸°ëŠ¥ | ìš°ì„ ìˆœìœ„ | ë³µì¡ë„ |
|------|----------|--------|
| Firestore ë°ì´í„° ì˜êµ¬ ì €ì¥ | ğŸ”´ Critical | Medium |
| ë§ˆì´í˜ì´ì§€ (ì£¼ë¬¸/ì˜ìƒ í™•ì¸) | ğŸ”´ Critical | High |
| ê´€ë¦¬ì í˜ì´ì§€ | ğŸ”´ Critical | High |
| í™˜ë¶ˆ ì‹ ì²­/ì²˜ë¦¬ ì‹œìŠ¤í…œ | ğŸŸ¡ High | High |
| Firebase Storage ì˜ìƒ ì €ì¥ | ğŸŸ¡ High | Medium |
| ì´ë©”ì¼ ì•Œë¦¼ ì‹œìŠ¤í…œ | ğŸŸ¢ Medium | Medium |

---

## ğŸ—„ï¸ Phase 1: Firestore ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 1.1 ì»¬ë ‰ì…˜ êµ¬ì¡°

```
firestore/
â”œâ”€â”€ users/                          # ì‚¬ìš©ì ì •ë³´
â”‚   â””â”€â”€ {userId}/
â”‚       â”œâ”€â”€ uid: string
â”‚       â”œâ”€â”€ email: string
â”‚       â”œâ”€â”€ displayName: string
â”‚       â”œâ”€â”€ photoURL: string
â”‚       â”œâ”€â”€ phoneNumber: string | null
â”‚       â”œâ”€â”€ role: 'user' | 'admin'
â”‚       â”œâ”€â”€ createdAt: Timestamp
â”‚       â””â”€â”€ updatedAt: Timestamp
â”‚
â”œâ”€â”€ orders/                         # ì£¼ë¬¸ ì •ë³´
â”‚   â””â”€â”€ {orderId}/
â”‚       â”œâ”€â”€ orderId: string              # payment_xxxxx
â”‚       â”œâ”€â”€ userId: string               # Firebase Auth UID
â”‚       â”œâ”€â”€ paymentId: string            # PortOne Payment ID
â”‚       â”œâ”€â”€ status: OrderStatus          # ì£¼ë¬¸ ìƒíƒœ
â”‚       â”‚
â”‚       â”œâ”€â”€ # ì œí’ˆ ì •ë³´
â”‚       â”œâ”€â”€ productInfo: {
â”‚       â”‚   â”œâ”€â”€ color: 'blue' | 'red'
â”‚       â”‚   â”œâ”€â”€ period: 'daily' | 'weekly' | 'monthly'
â”‚       â”‚   â”œâ”€â”€ periodDays: number       # ì‹¤ì œ ë Œíƒˆ ì¼ìˆ˜
â”‚       â”‚   â””â”€â”€ productName: string
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ # AI ë””ìì¸ ì •ë³´
â”‚       â”œâ”€â”€ designInfo: {
â”‚       â”‚   â”œâ”€â”€ category: string         # opening, wedding, birthday ë“±
â”‚       â”‚   â”œâ”€â”€ style: string            # neon, elegant ë“±
â”‚       â”‚   â”œâ”€â”€ prompt: string
â”‚       â”‚   â””â”€â”€ referenceImageUrl?: string
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ # ìƒì„±ëœ ë¯¸ë””ì–´
â”‚       â”œâ”€â”€ generatedMedia: {
â”‚       â”‚   â”œâ”€â”€ imageUrl: string         # Firebase Storage URL
â”‚       â”‚   â”œâ”€â”€ videoUrl: string         # Firebase Storage URL
â”‚       â”‚   â””â”€â”€ thumbnailUrl: string
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ # ê²°ì œ ì •ë³´
â”‚       â”œâ”€â”€ payment: {
â”‚       â”‚   â”œâ”€â”€ amount: number           # ê²°ì œ ê¸ˆì•¡
â”‚       â”‚   â”œâ”€â”€ deposit: number          # ë³´ì¦ê¸ˆ (500,000ì›)
â”‚       â”‚   â”œâ”€â”€ totalAmount: number      # ì´ ê¸ˆì•¡
â”‚       â”‚   â”œâ”€â”€ method: string           # CARD ë“±
â”‚       â”‚   â””â”€â”€ paidAt: Timestamp
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ # ê³ ê° ì •ë³´
â”‚       â”œâ”€â”€ customer: {
â”‚       â”‚   â”œâ”€â”€ name: string
â”‚       â”‚   â”œâ”€â”€ email: string
â”‚       â”‚   â”œâ”€â”€ phone: string
â”‚       â”‚   â””â”€â”€ address?: string
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ # ë Œíƒˆ ê¸°ê°„
â”‚       â”œâ”€â”€ rental: {
â”‚       â”‚   â”œâ”€â”€ startDate: Timestamp
â”‚       â”‚   â”œâ”€â”€ endDate: Timestamp
â”‚       â”‚   â””â”€â”€ installationAddress?: string
â”‚       â”‚ }
â”‚       â”‚
â”‚       â”œâ”€â”€ createdAt: Timestamp
â”‚       â””â”€â”€ updatedAt: Timestamp
â”‚
â”œâ”€â”€ refund_requests/               # í™˜ë¶ˆ ìš”ì²­
â”‚   â””â”€â”€ {refundId}/
â”‚       â”œâ”€â”€ refundId: string
â”‚       â”œâ”€â”€ orderId: string
â”‚       â”œâ”€â”€ userId: string
â”‚       â”œâ”€â”€ status: RefundStatus         # pending, approved, rejected, completed
â”‚       â”œâ”€â”€ reason: string               # í™˜ë¶ˆ ì‚¬ìœ 
â”‚       â”œâ”€â”€ reasonType: RefundReasonType # defect, shipping_damage, etc.
â”‚       â”œâ”€â”€ amount: number               # í™˜ë¶ˆ ìš”ì²­ ê¸ˆì•¡
â”‚       â”œâ”€â”€ refundAmount: number         # ì‹¤ì œ í™˜ë¶ˆ ê¸ˆì•¡ (ìˆ˜ìˆ˜ë£Œ ì°¨ê° í›„)
â”‚       â”œâ”€â”€ evidenceImages?: string[]    # ì¦ê±° ì‚¬ì§„ URLs
â”‚       â”œâ”€â”€ adminNote?: string           # ê´€ë¦¬ì ë©”ëª¨
â”‚       â”œâ”€â”€ processedBy?: string         # ì²˜ë¦¬í•œ ê´€ë¦¬ì ID
â”‚       â”œâ”€â”€ processedAt?: Timestamp
â”‚       â”œâ”€â”€ createdAt: Timestamp
â”‚       â””â”€â”€ updatedAt: Timestamp
â”‚
â””â”€â”€ admin_logs/                    # ê´€ë¦¬ì í™œë™ ë¡œê·¸
    â””â”€â”€ {logId}/
        â”œâ”€â”€ adminId: string
        â”œâ”€â”€ action: string              # order_update, refund_approve ë“±
        â”œâ”€â”€ targetCollection: string
        â”œâ”€â”€ targetId: string
        â”œâ”€â”€ details: object
        â”œâ”€â”€ timestamp: Timestamp
        â””â”€â”€ ipAddress?: string
```

### 1.2 íƒ€ì… ì •ì˜

```typescript
// src/types/order.ts

export type OrderStatus =
  | 'pending'           // ê²°ì œ ëŒ€ê¸°
  | 'paid'              // ê²°ì œ ì™„ë£Œ
  | 'preparing'         // ì¤€ë¹„ ì¤‘
  | 'shipping'          // ë°°ì†¡ ì¤‘
  | 'installed'         // ì„¤ì¹˜ ì™„ë£Œ
  | 'in_use'            // ì‚¬ìš© ì¤‘
  | 'pickup_scheduled'  // ìˆ˜ê±° ì˜ˆì •
  | 'completed'         // ì™„ë£Œ
  | 'cancelled'         // ì·¨ì†Œë¨
  | 'refund_requested'  // í™˜ë¶ˆ ìš”ì²­
  | 'refunded'          // í™˜ë¶ˆ ì™„ë£Œ

export type RefundStatus =
  | 'pending'           // ëŒ€ê¸° ì¤‘
  | 'reviewing'         // ê²€í†  ì¤‘
  | 'approved'          // ìŠ¹ì¸ë¨
  | 'rejected'          // ê±°ì ˆë¨
  | 'processing'        // ì²˜ë¦¬ ì¤‘
  | 'completed'         // ì™„ë£Œ

export type RefundReasonType =
  | 'defect'            // ì œí’ˆ í•˜ì
  | 'shipping_damage'   // ë°°ì†¡ ì¤‘ íŒŒì†
  | 'wrong_product'     // ìƒí’ˆ ë¶ˆì¼ì¹˜
  | 'installation_fail' // ì„¤ì¹˜ ë¶ˆê°€
  | 'simple_change'     // ë‹¨ìˆœ ë³€ì‹¬
  | 'other'             // ê¸°íƒ€

export type UserRole = 'user' | 'admin'
```

---

## ğŸ‘¤ Phase 2: ë§ˆì´í˜ì´ì§€ êµ¬í˜„

### 2.1 ë¼ìš°íŠ¸ êµ¬ì¡°

```
src/app/
â”œâ”€â”€ mypage/
â”‚   â”œâ”€â”€ page.tsx                   # ë§ˆì´í˜ì´ì§€ ë©”ì¸ (ëŒ€ì‹œë³´ë“œ)
â”‚   â”œâ”€â”€ layout.tsx                 # ë§ˆì´í˜ì´ì§€ ê³µí†µ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # ì£¼ë¬¸ ë‚´ì—­ ëª©ë¡
â”‚   â”‚   â””â”€â”€ [orderId]/
â”‚   â”‚       â””â”€â”€ page.tsx           # ì£¼ë¬¸ ìƒì„¸ ë³´ê¸°
â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â””â”€â”€ page.tsx               # ìƒì„±í•œ ì˜ìƒ ê°¤ëŸ¬ë¦¬
â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ page.tsx               # í”„ë¡œí•„ ê´€ë¦¬
â”‚   â””â”€â”€ refunds/
â”‚       â”œâ”€â”€ page.tsx               # í™˜ë¶ˆ ì‹ ì²­ ë‚´ì—­
â”‚       â””â”€â”€ new/
â”‚           â””â”€â”€ page.tsx           # ìƒˆ í™˜ë¶ˆ ì‹ ì²­
```

### 2.2 ë§ˆì´í˜ì´ì§€ ë©”ì¸ ëŒ€ì‹œë³´ë“œ

**ê²½ë¡œ**: `/mypage`

**êµ¬ì„± ìš”ì†Œ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë§ˆì´í˜ì´ì§€                                    [í”„ë¡œí•„ ìˆ˜ì •] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ì´ ì£¼ë¬¸     â”‚  â”‚ ì§„í–‰ ì¤‘     â”‚  â”‚ ìƒì„± ì˜ìƒ   â”‚         â”‚
â”‚  â”‚    3ê±´      â”‚  â”‚    1ê±´      â”‚  â”‚    5ê°œ      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ìµœê·¼ ì£¼ë¬¸                              [ì „ì²´ ë³´ê¸° â†’] â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ“¦ #ORD-2024-001  ë¸”ë£¨íƒ€ì… ì£¼ê°„ ë Œíƒˆ     ì„¤ì¹˜ ì™„ë£Œ   â”‚  â”‚
â”‚  â”‚ ğŸ“¦ #ORD-2024-002  ë ˆë“œíƒ€ì… ì›”ê°„ ë Œíƒˆ     ë°°ì†¡ ì¤‘     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ë‚´ ì˜ìƒ ê°¤ëŸ¬ë¦¬                         [ì „ì²´ ë³´ê¸° â†’] â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [ì˜ìƒ1] [ì˜ìƒ2] [ì˜ìƒ3] [ì˜ìƒ4]                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ë¹ ë¥¸ ë©”ë‰´                                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [ğŸ“‹ ì£¼ë¬¸ë‚´ì—­] [ğŸ¬ ë‚´ ì˜ìƒ] [ğŸ’³ í™˜ë¶ˆì‹ ì²­] [â“ ê³ ê°ì„¼í„°]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ì£¼ë¬¸ ë‚´ì—­ í˜ì´ì§€

**ê²½ë¡œ**: `/mypage/orders`

**ê¸°ëŠ¥**:
- ì „ì²´ ì£¼ë¬¸ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
- ì£¼ë¬¸ ìƒíƒœë³„ í•„í„°ë§
- ê¸°ê°„ë³„ í•„í„°ë§
- ì£¼ë¬¸ ìƒì„¸ ë³´ê¸°
- í™˜ë¶ˆ ì‹ ì²­ ë²„íŠ¼

**ì£¼ë¬¸ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì£¼ë¬¸ë²ˆí˜¸: #ORD-2024-001          2024.12.06 ê²°ì œ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚ â”‚ [ì˜ìƒ   â”‚  ë¸”ë£¨ íƒ€ì… í™€ë¡œê·¸ë¨ í™”í™˜                       â”‚
â”‚ â”‚ ì¸ë„¤ì¼] â”‚  ë Œíƒˆ ê¸°ê°„: ì£¼ê°„ (7ì¼)                         â”‚
â”‚ â”‚         â”‚  ë””ìì¸: ê°œì—… ì¶•í•˜ / ë„¤ì˜¨ ì‚¬ì´ë²„í‘í¬            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                             â”‚
â”‚  ë Œíƒˆ ê¸°ê°„: 2024.12.06 ~ 2024.12.13                        â”‚
â”‚  ê²°ì œ ê¸ˆì•¡: â‚©700,000 (ë³´ì¦ê¸ˆ â‚©500,000 ë³„ë„)               â”‚
â”‚                                                             â”‚
â”‚  ìƒíƒœ: ğŸŸ¢ ì„¤ì¹˜ ì™„ë£Œ                                        â”‚
â”‚                                                             â”‚
â”‚  [ìƒì„¸ ë³´ê¸°]  [ì˜ìƒ ë‹¤ìš´ë¡œë“œ]  [í™˜ë¶ˆ ì‹ ì²­]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ì£¼ë¬¸ ìƒì„¸ í˜ì´ì§€

**ê²½ë¡œ**: `/mypage/orders/[orderId]`

**êµ¬ì„±**:
- ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´
- AI ìƒì„± ë””ìì¸ ì •ë³´
- ìƒì„±ëœ ì˜ìƒ ì¬ìƒ ë° ë‹¤ìš´ë¡œë“œ
- ê²°ì œ ì •ë³´
- ë°°ì†¡/ì„¤ì¹˜ ì •ë³´
- ë Œíƒˆ íƒ€ì„ë¼ì¸ (ìƒíƒœ ë³€í™” ê¸°ë¡)
- í™˜ë¶ˆ ì‹ ì²­ ë²„íŠ¼

### 2.5 ì˜ìƒ ê°¤ëŸ¬ë¦¬ í˜ì´ì§€

**ê²½ë¡œ**: `/mypage/videos`

**ê¸°ëŠ¥**:
- ê·¸ë¦¬ë“œ í˜•íƒœ ì˜ìƒ ëª©ë¡
- ì˜ìƒ ë¯¸ë¦¬ë³´ê¸°
- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
- ê´€ë ¨ ì£¼ë¬¸ ì •ë³´ ë§í¬

---

## ğŸ›¡ï¸ Phase 3: ê´€ë¦¬ì í˜ì´ì§€ êµ¬í˜„

### 3.1 ë¼ìš°íŠ¸ êµ¬ì¡°

```
src/app/
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ page.tsx                   # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ layout.tsx                 # ê´€ë¦¬ì ê³µí†µ ë ˆì´ì•„ì›ƒ + ê¶Œí•œ ì²´í¬
â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # ì „ì²´ ì£¼ë¬¸ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ [orderId]/
â”‚   â”‚       â””â”€â”€ page.tsx           # ì£¼ë¬¸ ìƒì„¸/ìˆ˜ì •
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ [userId]/
â”‚   â”‚       â””â”€â”€ page.tsx           # ì‚¬ìš©ì ìƒì„¸
â”‚   â”œâ”€â”€ refunds/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # í™˜ë¶ˆ ìš”ì²­ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ [refundId]/
â”‚   â”‚       â””â”€â”€ page.tsx           # í™˜ë¶ˆ ìƒì„¸/ì²˜ë¦¬
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx               # ì‹œìŠ¤í…œ ì„¤ì •
```

### 3.2 ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

**ê²½ë¡œ**: `/admin`

**êµ¬ì„± ìš”ì†Œ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ                            [ê´€ë¦¬ì: í™ê¸¸ë™]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì˜¤ëŠ˜ ì£¼ë¬¸ â”‚ â”‚ ëŒ€ê¸° ì¤‘   â”‚ â”‚ í™˜ë¶ˆ ìš”ì²­ â”‚ â”‚ ì´ ë§¤ì¶œ   â”‚   â”‚
â”‚  â”‚   12ê±´    â”‚ â”‚   5ê±´     â”‚ â”‚   2ê±´     â”‚ â”‚ â‚©15.2M    â”‚   â”‚
â”‚  â”‚   +3 â†‘    â”‚ â”‚   -2 â†“    â”‚ â”‚   +1 â†‘    â”‚ â”‚ +8% â†‘     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ìµœê·¼ ì£¼ë¬¸                              [ì „ì²´ ë³´ê¸° â†’] â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ID         ê³ ê°ëª…    ìƒí’ˆ          ê¸ˆì•¡      ìƒíƒœ    â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ #001       ê¹€ì² ìˆ˜    ë¸”ë£¨/ì£¼ê°„     â‚©700K    ê²°ì œì™„ë£Œ â”‚  â”‚
â”‚  â”‚ #002       ì´ì˜í¬    ë ˆë“œ/ì›”ê°„     â‚©2.4M    ë°°ì†¡ì¤‘   â”‚  â”‚
â”‚  â”‚ #003       ë°•ì§€í›ˆ    ë¸”ë£¨/ì¼ê°„     â‚©120K    ì¤€ë¹„ì¤‘   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ í™˜ë¶ˆ ìš”ì²­ (ê¸´ê¸‰)        â”‚ â”‚ ë§¤ì¶œ ì°¨íŠ¸               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ”´ #REF-001 ì œí’ˆí•˜ì   â”‚ â”‚ [7ì¼ê°„ ë§¤ì¶œ ê·¸ë˜í”„]     â”‚   â”‚
â”‚  â”‚ ğŸŸ¡ #REF-002 ë‹¨ìˆœë³€ì‹¬   â”‚ â”‚                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ì£¼ë¬¸ ê´€ë¦¬ í˜ì´ì§€

**ê²½ë¡œ**: `/admin/orders`

**ê¸°ëŠ¥**:
- ì „ì²´ ì£¼ë¬¸ í…Œì´ë¸” ë·°
- ê²€ìƒ‰ (ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ëª…, ì´ë©”ì¼)
- í•„í„°ë§ (ìƒíƒœ, ë‚ ì§œ, ì œí’ˆ íƒ€ì…)
- ì •ë ¬ (ë‚ ì§œ, ê¸ˆì•¡, ìƒíƒœ)
- ì¼ê´„ ìƒíƒœ ë³€ê²½
- CSV ë‚´ë³´ë‚´ê¸°
- ì£¼ë¬¸ ìƒì„¸ ëª¨ë‹¬/í˜ì´ì§€

**ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ í”Œë¡œìš°**:
```
ê²°ì œì™„ë£Œ â†’ ì¤€ë¹„ì¤‘ â†’ ë°°ì†¡ì¤‘ â†’ ì„¤ì¹˜ì™„ë£Œ â†’ ì‚¬ìš©ì¤‘ â†’ ìˆ˜ê±°ì˜ˆì • â†’ ì™„ë£Œ
                                    â†“
                              í™˜ë¶ˆìš”ì²­ â†’ í™˜ë¶ˆì™„ë£Œ
```

### 3.4 ì‚¬ìš©ì ê´€ë¦¬ í˜ì´ì§€

**ê²½ë¡œ**: `/admin/users`

**ê¸°ëŠ¥**:
- ì „ì²´ ì‚¬ìš©ì ëª©ë¡
- ê²€ìƒ‰ (ì´ë¦„, ì´ë©”ì¼)
- ì‚¬ìš©ì ìƒì„¸ ì •ë³´
- ì‚¬ìš©ìë³„ ì£¼ë¬¸ ë‚´ì—­
- ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬/í•´ì œ

### 3.5 í™˜ë¶ˆ ê´€ë¦¬ í˜ì´ì§€

**ê²½ë¡œ**: `/admin/refunds`

**ê¸°ëŠ¥**:
- í™˜ë¶ˆ ìš”ì²­ ëª©ë¡
- ìƒíƒœë³„ í•„í„°ë§ (ëŒ€ê¸°ì¤‘, ê²€í† ì¤‘, ìŠ¹ì¸, ê±°ì ˆ)
- í™˜ë¶ˆ ì²˜ë¦¬ (ìŠ¹ì¸/ê±°ì ˆ)
- ì‹¤ì œ í™˜ë¶ˆ ê¸ˆì•¡ ì…ë ¥
- PortOne ê²°ì œ ì·¨ì†Œ API ì—°ë™
- ê´€ë¦¬ì ë©”ëª¨ ì‘ì„±

**í™˜ë¶ˆ ì²˜ë¦¬ ëª¨ë‹¬**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í™˜ë¶ˆ ì²˜ë¦¬                                           [ë‹«ê¸°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì£¼ë¬¸ë²ˆí˜¸: #ORD-2024-001                                    â”‚
â”‚  ê³ ê°ëª…: ê¹€ì² ìˆ˜                                             â”‚
â”‚  ì› ê²°ì œê¸ˆì•¡: â‚©700,000                                      â”‚
â”‚  í™˜ë¶ˆ ì‚¬ìœ : ì œí’ˆ í•˜ì                                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ í™˜ë¶ˆ ê¸ˆì•¡ ê³„ì‚° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì› ê²°ì œê¸ˆì•¡:           â‚©700,000                       â”‚ â”‚
â”‚  â”‚ í™˜ë¶ˆ ë¹„ìœ¨:             [100%  â–¼]                      â”‚ â”‚
â”‚  â”‚ ë°°ì†¡ë¹„ ì°¨ê°:           â‚©0                             â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚
â”‚  â”‚ ìµœì¢… í™˜ë¶ˆê¸ˆì•¡:         â‚©700,000                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ê´€ë¦¬ì ë©”ëª¨:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì œí’ˆ í•˜ì í™•ì¸ë¨. ì „ì•¡ í™˜ë¶ˆ ì²˜ë¦¬.                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚                    [ê±°ì ˆ]  [ìŠ¹ì¸ ë° í™˜ë¶ˆ ì²˜ë¦¬]              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 ê´€ë¦¬ì ê¶Œí•œ ì²´í¬

```typescript
// src/lib/admin.ts

export async function isAdmin(userId: string): Promise<boolean> {
  const userDoc = await getDoc(doc(db, 'users', userId));
  return userDoc.exists() && userDoc.data()?.role === 'admin';
}

// AdminLayoutì—ì„œ ê¶Œí•œ ì²´í¬
// ê¶Œí•œ ì—†ìœ¼ë©´ /mypageë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
```

---

## ğŸ’° Phase 4: í™˜ë¶ˆ ì‹œìŠ¤í…œ êµ¬í˜„

### 4.1 í™˜ë¶ˆ ì‹ ì²­ í”Œë¡œìš°

```
ì‚¬ìš©ì ë§ˆì´í˜ì´ì§€
    â†“
ì£¼ë¬¸ ìƒì„¸ì—ì„œ [í™˜ë¶ˆ ì‹ ì²­] í´ë¦­
    â†“
í™˜ë¶ˆ ì‹ ì²­ í¼ ì‘ì„±
â”œâ”€â”€ í™˜ë¶ˆ ì‚¬ìœ  ì„ íƒ
â”œâ”€â”€ ìƒì„¸ ë‚´ìš© ì…ë ¥
â””â”€â”€ ì¦ê±° ì‚¬ì§„ ì²¨ë¶€ (ì„ íƒ)
    â†“
ì‹ ì²­ ì œì¶œ
    â†“
Firestoreì— refund_request ìƒì„±
    â†“
ê´€ë¦¬ì ì•Œë¦¼ (ì´ë©”ì¼/ëŒ€ì‹œë³´ë“œ)
    â†“
ê´€ë¦¬ì ê²€í† 
â”œâ”€â”€ ìŠ¹ì¸ â†’ PortOne ê²°ì œ ì·¨ì†Œ API í˜¸ì¶œ â†’ í™˜ë¶ˆ ì™„ë£Œ
â””â”€â”€ ê±°ì ˆ â†’ ì‚¬ìœ  ì•ˆë‚´
    â†“
ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ ì•Œë¦¼
```

### 4.2 PortOne ê²°ì œ ì·¨ì†Œ API

```typescript
// src/app/api/refund/process/route.ts

export async function POST(request: NextRequest) {
  // 1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
  // 2. í™˜ë¶ˆ ìš”ì²­ ì •ë³´ ì¡°íšŒ
  // 3. PortOne ê²°ì œ ì·¨ì†Œ API í˜¸ì¶œ
  //    POST https://api.portone.io/payments/{paymentId}/cancel
  // 4. ì„±ê³µ ì‹œ ì£¼ë¬¸ ìƒíƒœ ë³€ê²½
  // 5. í™˜ë¶ˆ ìš”ì²­ ìƒíƒœ ë³€ê²½
  // 6. ì•Œë¦¼ ë°œì†¡
}
```

### 4.3 í™˜ë¶ˆ ê¸ˆì•¡ ê³„ì‚° ë¡œì§

```typescript
// src/lib/refund.ts

export function calculateRefundAmount(
  originalAmount: number,
  reasonType: RefundReasonType,
  daysUsed: number
): { refundAmount: number; deduction: number; rate: number } {
  let rate = 100; // ê¸°ë³¸ 100% í™˜ë¶ˆ

  switch (reasonType) {
    case 'defect':
    case 'shipping_damage':
    case 'wrong_product':
      rate = 100; // íšŒì‚¬ ê·€ì±… - ì „ì•¡ í™˜ë¶ˆ
      break;
    case 'installation_fail':
      rate = daysUsed === 0 ? 100 : 90; // ì„¤ì¹˜ ì „ 100%, í›„ 90%
      break;
    case 'simple_change':
      rate = daysUsed <= 7 ? 85 : 0; // 7ì¼ ì´ë‚´ 85%, ì´í›„ ë¶ˆê°€
      break;
    default:
      rate = 0;
  }

  const refundAmount = Math.floor(originalAmount * (rate / 100));
  const deduction = originalAmount - refundAmount;

  return { refundAmount, deduction, rate };
}
```

---

## ğŸ“ Phase 5: Firebase Storage ì˜ìƒ ì €ì¥

### 5.1 ì €ì¥ êµ¬ì¡°

```
firebase-storage/
â”œâ”€â”€ users/
â”‚   â””â”€â”€ {userId}/
â”‚       â””â”€â”€ generated-videos/
â”‚           â””â”€â”€ {orderId}/
â”‚               â”œâ”€â”€ video.mp4           # ì›ë³¸ ì˜ìƒ
â”‚               â”œâ”€â”€ thumbnail.jpg       # ì¸ë„¤ì¼ ì´ë¯¸ì§€
â”‚               â””â”€â”€ preview.mp4         # ë¯¸ë¦¬ë³´ê¸°ìš© ì €í™”ì§ˆ
```

### 5.2 ì—…ë¡œë“œ í”Œë¡œìš°

```
ê²°ì œ ì„±ê³µ
    â†“
/api/confirm-paymentì—ì„œ ì£¼ë¬¸ ì €ì¥
    â†“
Base64 ë¹„ë””ì˜¤ ë°ì´í„° â†’ Firebase Storage ì—…ë¡œë“œ
    â†“
Storage URLì„ orders ì»¬ë ‰ì…˜ì— ì €ì¥
    â†“
ë§ˆì´í˜ì´ì§€ì—ì„œ Storage URLë¡œ ì˜ìƒ í‘œì‹œ
```

### 5.3 ì—…ë¡œë“œ API

```typescript
// src/app/api/upload-video/route.ts

export async function POST(request: NextRequest) {
  // 1. ì¸ì¦ í™•ì¸
  // 2. Base64 ë¹„ë””ì˜¤ ë°ì´í„° ë°›ê¸°
  // 3. Firebase Storageì— ì—…ë¡œë“œ
  // 4. ë‹¤ìš´ë¡œë“œ URL ë°˜í™˜
}
```

---

## ğŸ“ Phase 6: ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 6.1 ê³µí†µ ì»´í¬ë„ŒíŠ¸

```
src/components/
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ DataTable.tsx              # ë²”ìš© ë°ì´í„° í…Œì´ë¸”
â”‚   â”œâ”€â”€ Pagination.tsx             # í˜ì´ì§€ë„¤ì´ì…˜
â”‚   â”œâ”€â”€ StatusBadge.tsx            # ìƒíƒœ ë°°ì§€
â”‚   â”œâ”€â”€ Modal.tsx                  # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ LoadingSpinner.tsx         # ë¡œë”© ìŠ¤í”¼ë„ˆ
â”‚   â””â”€â”€ EmptyState.tsx             # ë¹ˆ ìƒíƒœ UI
â”‚
â”œâ”€â”€ mypage/
â”‚   â”œâ”€â”€ MypageLayout.tsx           # ë§ˆì´í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ MypageSidebar.tsx          # ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”œâ”€â”€ OrderCard.tsx              # ì£¼ë¬¸ ì¹´ë“œ
â”‚   â”œâ”€â”€ VideoCard.tsx              # ì˜ìƒ ì¹´ë“œ
â”‚   â””â”€â”€ RefundForm.tsx             # í™˜ë¶ˆ ì‹ ì²­ í¼
â”‚
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ AdminLayout.tsx            # ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ AdminSidebar.tsx           # ê´€ë¦¬ì ì‚¬ì´ë“œë°”
â”‚   â”œâ”€â”€ OrderTable.tsx             # ì£¼ë¬¸ í…Œì´ë¸”
â”‚   â”œâ”€â”€ UserTable.tsx              # ì‚¬ìš©ì í…Œì´ë¸”
â”‚   â”œâ”€â”€ RefundTable.tsx            # í™˜ë¶ˆ í…Œì´ë¸”
â”‚   â”œâ”€â”€ DashboardStats.tsx         # ëŒ€ì‹œë³´ë“œ í†µê³„
â”‚   â””â”€â”€ RefundProcessModal.tsx     # í™˜ë¶ˆ ì²˜ë¦¬ ëª¨ë‹¬
â”‚
â””â”€â”€ orders/
    â”œâ”€â”€ OrderTimeline.tsx          # ì£¼ë¬¸ íƒ€ì„ë¼ì¸
    â”œâ”€â”€ OrderStatusFlow.tsx        # ìƒíƒœ í”Œë¡œìš° í‘œì‹œ
    â””â”€â”€ OrderDetailCard.tsx        # ì£¼ë¬¸ ìƒì„¸ ì¹´ë“œ
```

### 6.2 í›… (Hooks)

```
src/hooks/
â”œâ”€â”€ useOrders.ts                   # ì£¼ë¬¸ ì¡°íšŒ/ê´€ë¦¬
â”œâ”€â”€ useRefunds.ts                  # í™˜ë¶ˆ ì¡°íšŒ/ê´€ë¦¬
â”œâ”€â”€ useAdmin.ts                    # ê´€ë¦¬ì ê¶Œí•œ/ê¸°ëŠ¥
â”œâ”€â”€ usePagination.ts               # í˜ì´ì§€ë„¤ì´ì…˜
â””â”€â”€ useFirestore.ts                # Firestore CRUD
```

---

## ğŸ”Œ Phase 7: API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### 7.1 API êµ¬ì¡°

```
src/app/api/
â”œâ”€â”€ orders/
â”‚   â”œâ”€â”€ route.ts                   # GET: ì£¼ë¬¸ ëª©ë¡, POST: ì£¼ë¬¸ ìƒì„±
â”‚   â””â”€â”€ [orderId]/
â”‚       â”œâ”€â”€ route.ts               # GET: ì£¼ë¬¸ ìƒì„¸, PATCH: ìƒíƒœ ë³€ê²½
â”‚       â””â”€â”€ refund/
â”‚           â””â”€â”€ route.ts           # POST: í™˜ë¶ˆ ìš”ì²­ ìƒì„±
â”‚
â”œâ”€â”€ refunds/
â”‚   â”œâ”€â”€ route.ts                   # GET: í™˜ë¶ˆ ëª©ë¡
â”‚   â””â”€â”€ [refundId]/
â”‚       â”œâ”€â”€ route.ts               # GET: í™˜ë¶ˆ ìƒì„¸
â”‚       â””â”€â”€ process/
â”‚           â””â”€â”€ route.ts           # POST: í™˜ë¶ˆ ì²˜ë¦¬ (ê´€ë¦¬ì)
â”‚
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ route.ts                   # GET: ì‚¬ìš©ì ëª©ë¡ (ê´€ë¦¬ì)
â”‚   â”œâ”€â”€ me/
â”‚   â”‚   â””â”€â”€ route.ts               # GET/PATCH: ë‚´ í”„ë¡œí•„
â”‚   â””â”€â”€ [userId]/
â”‚       â””â”€â”€ route.ts               # GET/PATCH: ì‚¬ìš©ì ìƒì„¸ (ê´€ë¦¬ì)
â”‚
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ stats/
â”‚   â”‚   â””â”€â”€ route.ts               # GET: ëŒ€ì‹œë³´ë“œ í†µê³„
â”‚   â””â”€â”€ export/
â”‚       â””â”€â”€ route.ts               # GET: CSV ë‚´ë³´ë‚´ê¸°
â”‚
â”œâ”€â”€ upload-video/
â”‚   â””â”€â”€ route.ts                   # POST: ì˜ìƒ ì—…ë¡œë“œ
â”‚
â””â”€â”€ confirm-payment/
    â””â”€â”€ route.ts                   # ê¸°ì¡´ + Firestore ì €ì¥ ì¶”ê°€
```

---

## ğŸ¯ êµ¬í˜„ ìˆœì„œ (ìš°ì„ ìˆœìœ„)

### Week 1: ê¸°ë°˜ êµ¬ì¶•
1. âœ… Firestore ìŠ¤í‚¤ë§ˆ êµ¬í˜„ (íƒ€ì… ì •ì˜)
2. âœ… Firebase Storage ì„¤ì •
3. âœ… confirm-payment APIì— ì£¼ë¬¸ ì €ì¥ ë¡œì§ ì¶”ê°€
4. âœ… ì˜ìƒ ì—…ë¡œë“œ API êµ¬í˜„

### Week 2: ë§ˆì´í˜ì´ì§€
5. âœ… ë§ˆì´í˜ì´ì§€ ë ˆì´ì•„ì›ƒ êµ¬í˜„
6. âœ… ì£¼ë¬¸ ë‚´ì—­ í˜ì´ì§€ êµ¬í˜„
7. âœ… ì£¼ë¬¸ ìƒì„¸ í˜ì´ì§€ êµ¬í˜„
8. âœ… ì˜ìƒ ê°¤ëŸ¬ë¦¬ í˜ì´ì§€ êµ¬í˜„

### Week 3: ê´€ë¦¬ì í˜ì´ì§€
9. âœ… ê´€ë¦¬ì ê¶Œí•œ ì‹œìŠ¤í…œ êµ¬í˜„
10. âœ… ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ êµ¬í˜„
11. âœ… ì£¼ë¬¸ ê´€ë¦¬ í˜ì´ì§€ êµ¬í˜„
12. âœ… ì‚¬ìš©ì ê´€ë¦¬ í˜ì´ì§€ êµ¬í˜„

### Week 4: í™˜ë¶ˆ ì‹œìŠ¤í…œ
13. âœ… í™˜ë¶ˆ ì‹ ì²­ í¼ êµ¬í˜„
14. âœ… í™˜ë¶ˆ ê´€ë¦¬ í˜ì´ì§€ êµ¬í˜„
15. âœ… PortOne ê²°ì œ ì·¨ì†Œ API ì—°ë™
16. âœ… í™˜ë¶ˆ ì™„ë£Œ ì²˜ë¦¬

### Week 5: ë§ˆë¬´ë¦¬
17. âœ… í—¤ë”ì— ë§ˆì´í˜ì´ì§€ ë§í¬ ì¶”ê°€
18. âœ… ì „ì²´ í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •
19. âœ… ë°˜ì‘í˜• UI ìµœì í™”
20. âœ… ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

### ê¸°ì¡´ ì½”ë“œ í™œìš©
- `useProductWizard.ts`ì˜ íƒ€ì… ì •ì˜ ì¬ì‚¬ìš©
- `returns/page.tsx`ì˜ UI íŒ¨í„´ ì°¸ê³ 
- `Header.tsx`ì— ë§ˆì´í˜ì´ì§€ ë§í¬ ì¶”ê°€ í•„ìš”

### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- ëª¨ë“  APIì— Firebase Auth ì¸ì¦ ì²´í¬
- ê´€ë¦¬ì APIì— role ì²´í¬ ì¶”ê°€
- Firestore ë³´ì•ˆ ê·œì¹™ ì„¤ì •
- ë¯¼ê° ì •ë³´ ì•”í˜¸í™”

### ì„±ëŠ¥ ìµœì í™”
- Firestore ì¿¼ë¦¬ ì¸ë±ìŠ¤ ì„¤ì •
- í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©
- ì´ë¯¸ì§€/ì˜ìƒ lazy loading
- Firebase Storage CDN í™œìš©

---

## âœ… ìŠ¹ì¸ í›„ ì§„í–‰ ì˜ˆì •

ì´ ê¸°íšì„œì˜ ê²€í†  í›„ ìŠ¹ì¸ì„ ë°›ìœ¼ë©´, Phase 1ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ êµ¬í˜„ì„ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.

ê° Phase ì‹œì‘ ì „ì— ìƒì„¸ êµ¬í˜„ ê³„íšì„ ê³µìœ í•˜ê³ , ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.
