# 개선 기록 - 텍스트 애니메이션 및 미리보기 개선

## 개선 정보
- **발생 시각**: 2026-01-11 13:00:00
- **파일 경로**:
  - `src/components/ai-hologram/steps/MultiSceneStep.tsx`
  - `src/app/api/ai/render-text-overlay/route.ts`
- **개선 사유**: 사용자 피드백 - 미리보기 텍스트 위치 중앙, 애니메이션 효과 부족

## 문제점

### 1. 미리보기 텍스트 위치
- **문제**: `bottom-20` (80px)으로 설정했으나 여전히 중앙에 가까움
- **원인**: 80px이 충분하지 않음

### 2. 애니메이션 효과 부족
- **문제**: 단순 페이드 인/아웃만 존재
- **요구사항**: 크기 변화, 움직임 등 동적 효과 필요

### 3. 글로우 효과 약함
- **문제**: 기존 글로우가 충분히 화려하지 않음
- **요구사항**: 더 강력한 빛나는 효과

---

## 수정 과정

### 개선 1: 미리보기 텍스트 위치 및 애니메이션 (2026-01-11 13:00:00)
**파일**: `src/components/ai-hologram/steps/MultiSceneStep.tsx`

**변경 사항**:
1. **위치 하단 이동**: `bottom-20` (80px) → `bottom-12` (48px, 더 하단)
2. **텍스트 크기 증가**: `text-2xl` → `text-3xl`
3. **CSS 애니메이션 추가**:
   - 크기 펄스 효과: `scale(1) ↔ scale(1.05)`
   - 글로우 강화: `drop-shadow` 3단계 레이어
   - 애니메이션 주기: 2초 반복

```typescript
// CSS 애니메이션
@keyframes textGlow {
  0%, 100% {
    filter: drop-shadow(0 0 30px rgba(255,255,255,1)) drop-shadow(0 0 60px rgba(255,255,255,0.6));
    transform: scale(1);
  }
  50% {
    filter: drop-shadow(0 0 40px rgba(255,255,255,1)) drop-shadow(0 0 80px rgba(255,255,255,0.8));
    transform: scale(1.05);
  }
}
```

---

### 개선 2: FFmpeg 텍스트 애니메이션 효과 (2026-01-11 13:00:00)
**파일**: `src/app/api/ai/render-text-overlay/route.ts`

**변경 사항**:
1. **크기 애니메이션**: `fontsize=${fontSize}` → `fontsize='${fontSize}*(1.0+0.05*sin(2*PI*${sceneT}/2))'`
   - 5% 크기 변화 (1.0 ↔ 1.05)
   - 주기: 2초

2. **위치 애니메이션**: `y=(h-text_h-80)` → `y='(h-text_h-80)+5*sin(2*PI*${sceneT}/3)'`
   - 수직 이동: ±5px
   - 주기: 3초

3. **투명도 펄스 효과**: alpha 표현식에 sin 함수 추가
   - 기존: 단순 페이드 인/아웃
   - 개선: `0.85+0.15*sin(2*PI*${sceneT}/2)` (중간에 펄스 효과)

4. **글로우 강화**:
   - 레이어 1: `borderw=8` → `borderw=10`, `white@0.3` → `white@0.4`
   - 레이어 2: `borderw=4` → `borderw=6`, `white@0.5` → `white@0.6`
   - 레이어 3: `borderw=2` → `borderw=3`

---

## 최종 효과

### 미리보기 (CSS)
- ✅ 텍스트 위치: 하단 48px (중앙 이미지 안 가림)
- ✅ 크기 애니메이션: 1.0 ↔ 1.05 (2초 주기)
- ✅ 글로우 효과: 3단계 레이어 + 펄스 애니메이션
- ✅ 강력한 발광 효과

### 실제 영상 (FFmpeg)
- ✅ 크기 애니메이션: 5% 스케일 변화 (2초 주기)
- ✅ 위치 애니메이션: ±5px 수직 이동 (3초 주기)
- ✅ 투명도 펄스: 0.85 ↔ 1.0 반복 (2초 주기)
- ✅ 강화된 글로우: borderw 10/6/3 레이어

---

## 기술적 구현

### FFmpeg 표현식 사용
- **sin 함수**: 부드러운 주기적 변화
- **PI 상수**: 2*PI = 360도 = 1주기
- **상대 시간**: `sceneT = (t - scene.startTime)` (장면 시작부터의 시간)

### 애니메이션 주기 선택
- 크기/투명도: 2초 (빠른 펄스)
- 위치: 3초 (느린 호흡)
- 서로 다른 주기로 자연스러운 복합 효과

---

## 사용자 확인
- [ ] 사용자 확인 대기 중
- [ ] 사용자 확인 완료

---

## 최종 상태
**상태**: 진행 중 (코드 수정 완료, 사용자 테스트 대기)
**완료 시각**: -
**비고**: 미리보기 위치 하단 이동 + 크기/위치/투명도 애니메이션 추가
