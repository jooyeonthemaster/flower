# 2026-02-02 프로젝트 상세 분석 보고서

## 1. 개요
본 보고서는 2026년 2월 2일 수행된 프로젝트 전체 분석 결과를 담고 있습니다. 기존 문서(`docs/프로젝트분석보고서.md`)와 실제 코드를 정밀 대조하였으며, 일반적인 상용 웹 서비스 기준에서 부족하거나 개선이 필요한 사항을 중점적으로 정리했습니다.

## 2. 문서 vs 코드 정밀 대조 (Fact Check)

### 2.1 Contact API 구현 여부 (오류 수정)
*   **기존 문서 주장**: "Contact 폼 API 미구현 (긴급)"
*   **실제 코드 확인**: **구현되어 있음. (`src/app/api/inquiries/route.ts`)**
    *   `POST /api/inquiries` 로 DB 저장 로직이 정상 구현되어 있습니다.
    *   `src/app/contact/page.tsx`에서도 해당 API를 정상적으로 호출(`fetch`)하고 있습니다.
    *   **결론**: 기존 문서의 해당 항목은 해결된 것으로 업데이트가 필요합니다.

### 2.2 페이지네이션 (Pagination)
*   **기존 문서 주장**: UI 없음.
*   **실제 코드 확인**: **반쪽짜리 구현.**
    *   API(`api/inquiries`, `api/users`)는 `limit`, `offset` 쿼리 파라미터를 지원합니다.
    *   하지만 프론트엔드(`admin/users/page.tsx`)는 이 기능을 **사용하지 않습니다.**
    *   **문제점**: API에서 데이터를 가져올 때 기본값이나 전체를 가져와서 클라이언트에서 렌더링하는 방식입니다. 화면에는 페이지 번호나 "더 보기" 버튼이 존재하지 않아 데이터가 쌓이면 관리자 페이지 성능이 급격히 저하될 것입니다.

## 3. 핵심 취약점 및 개선 필요 사항 (Critical)

### 3.1 🚨 심각한 보안 취약점 (IDOR / Broken Access Control)
*   **위치**: `src/app/api/inquiries/route.ts` (및 유사한 Admin API들)
*   **코드 패턴**:
    ```typescript
    const adminId = searchParams.get('adminId');
    const isAdmin = await isUserAdmin(adminId);
    ```
*   **문제점**: 클라이언트가 쿼리 파라미터(`?adminId=...`)로 보낸 ID를 그대로 신뢰하여 권한을 체크합니다.
    *   악의적인 사용자가 실제 관리자의 UID만 알아내면(또는 추측하면), 로그인 토큰 없이도 브라우저 주소창에 URL을 입력하는 것만으로 고객 문의 내역을 전부 탈취할 수 있습니다.
*   **해결 방안**: 쿼리 파라미터가 아닌, 요청 헤더(`Authorization`)에 담긴 Firebase ID Token을 서버에서 검증하고, 그 토큰에서 추출한 UID로 권한을 확인해야 합니다.

### 3.2 📉 비즈니스 필수 요소 누락 (Analytics)
*   **현황**: `src/app/layout.tsx` 등 전역 레이아웃에 데이터 분석 스크립트가 전무함.
*   **누락 아이템**:
    *   **Google Analytics (GA4)**: 방문자 통계 불가.
    *   **Google Tag Manager (GTM)**: 마케팅 태그 관리 불가.
    *   **Naver Search Advisor (Webmaster)**: 국내 유입을 위한 메타 태그.
*   **영향**: 서비스 배포 후 사용자 행동 분석이나 마케팅 효율 측정이 불가능한 상태입니다.

### 3.3 🏗️ 공통 컴포넌트 부재 (Code Quality)
*   **현황**: `src/components/ui` 폴더에 `Badge.tsx` 단 하나만 존재.
*   **문제점**:
    *   `Button`, `Input`, `Card`, `Modal` 등 기본 UI 요소가 각 페이지마다 하드코딩 되어 있거나 복사/붙여넣기 되어 있습니다.
    *   **영향**: 디자인 수정 시 모든 파일을 일일이 찾아 고쳐야 하며, 사이트 전체의 디자인 일관성(예: 버튼 호버 효과, 인풋 포커스 색상)을 유지하기 매우 어렵습니다.

## 4. 웹 표준 및 완성도 분석 (General Standard)

### 4.1 SEO (검색 엔진 최적화)
*   **구현됨**: 기본적인 `metadata` (title, description, og:image)는 `layout.tsx`에 구현되어 있습니다.
*   **부족함**:
    *   **JSON-LD (Structured Data)**: 상품 페이지나 메인 페이지에 구조화 데이터가 없어 구글 검색 결과에 풍부하게 노출되지 않습니다.
    *   **Robots.txt / Sitemap.xml**: 동적 생성 로직 확인 필요.

### 4.2 UX (사용자 경험)
*   **Scroll to Top**: 랜딩 페이지가 길어질 경우 필수적인 '맨 위로 가기' 버튼 부재.
*   **Loading UX**: 데이터를 불러오는 동안 화면이 깜빡이거나 빈 공간이 노출됩니다. Skeleton UI 등을 도입하여 체감 로딩 속도를 개선해야 합니다.

## 5. 종합 요약 및 제언

현재 프로젝트는 **"기능 구현(Functionality)"** 단계는 훌륭하게 넘어섰으나, **"상용화(Production Ready)"** 단계로 가기 위한 **보안**과 **관리 효율성** 측면에서 구멍이 있습니다.

1.  **최우선 과제**: API 보안 인증 로직 전면 재검토 (Token 기반 인증으로 교체).
2.  **문서 현행화**: `Contact API 미구현` 내용은 문서에서 삭제 요망.
3.  **관리 편의성**: 관리자 페이지에 실제 페이지네이션 UI 붙이기.
4.  **비즈니스 준비**: GA4/GTM 스크립트 삽입.
